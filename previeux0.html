<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>The One and Only Ivan</title>
  <link rel="shortcut icon" href="/assets/img/bookshelf_3283747.png" type="image/x-icon" />
  <style>
    body {
      font-family: Arial, sans-serif;
      line-height: 1.6;
      margin: 0;
      padding: 0;
      background-color: #ebeeff;
    }

    .container {
      max-width: 800px;
      margin: 20px auto;
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
    }

    .book-cover {
      text-align: center;
      margin-bottom: 20px;
    }

    .book-cover img {
      max-width: 100%;
      height: auto;
      border-radius: 8px;
    }

    .book-title {
      font-size: 24px;
      color: #333;
      text-align: center;
      margin-bottom: 10px;
    }

    .book-author {
      font-size: 18px;
      color: #555;
      text-align: center;
      margin-bottom: 20px;
    }

    .book-details {
      margin-bottom: 20px;
    }

    .book-details h3 {
      margin-bottom: 10px;
      color: #333;
    }

    .book-actions {
      text-align: center;
    }

    .btn {
      display: inline-block;
      padding: 10px 20px;
      color: #fff;
      background-color: #007BFF;
      text-decoration: none;
      border-radius: 5px;
      margin: 5px;
    }

    .btn:hover {
      background-color: #0056b3;
    }

    .language-dropdown {
      position: relative;
      display: inline-block;
      font-family: Arial;
      font-size: 16px;
      margin: 15px;
    }

    .dropdown-btn {
      background-color: transparent;
      color: #333;
      border: none;
      padding: 0.5rem 1rem;
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 0.5rem;
      transition: all 0.3s ease;
    }

    .dropdown-btn:hover {
      background-color: rgba(0, 0, 0, 0.05);
      border-radius: 1rem;
    }

    .dropdown-btn .arrow {
      display: inline-block;
      transition: transform 0.3s ease;
    }

    .dropdown-btn.open .arrow {
      transform: rotate(180deg);
    }

    .dropdown-menu {
      position: absolute;
      top: 110%;
      left: 0;
      background-color: #fff;
      border-radius: 0.75rem;
      box-shadow: 0 8px 16px rgba(0, 0, 0, 0.08);
      list-style: none;
      padding: 0.5rem 0;
      margin: 0;
      display: none;
      min-width: 180px;
      z-index: 999;
    }

    .dropdown-menu.show {
      display: block;
    }

    .dropdown-menu li {
      opacity: 0;
      transform: translateY(-10px);
      padding: 0.5rem 1rem;
      cursor: pointer;
      transition: background 0.2s ease;
      animation: dropIn 0.4s forwards;
      animation-delay: calc(var(--i) * 100ms);
    }

    .dropdown-menu.show li {
      animation: dropIn 0.4s forwards;
      animation-delay: calc(var(--i) * 100ms);
    }

    @keyframes dropIn {
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    .dropdown-menu li:hover {
      background-color: #f9f9f9;
    }

    .goog-te-banner-frame.skiptranslate,
    .goog-te-gadget-icon,
    .goog-logo-link,
    .goog-te-gadget-simple,
    .goog-te-menu-value span,
    #goog-gt-tt,
    body > .skiptranslate {
      display: none !important;
    }
  </style>
</head>

<body>
  <!-- Language Switcher Dropdown -->
  <div class="language-dropdown">
    <button onclick="toggleLanguageMenu()" class="dropdown-btn" id="languageButton">
      üåê Language
      <span class="arrow" id="dropdownArrow">&#9662;</span>
    </button>
    <ul class="dropdown-menu" id="languageMenu">
      <li style="--i:0" onclick="switchLanguage('en')">English</li>
      <li style="--i:1" onclick="switchLanguage('fr')">Fran√ßais</li>
    </ul>
  </div>

  <!-- Hidden Google Translate Container -->
  <div style="display: none;">
    <div id="google_translate_element"></div>
  </div>

  <!-- Book Content -->
  <div class="container">
    <div class="book-cover">
      <img src="/assets/img/download (3).jpg" alt="Book Cover" />
    </div>
    <div class="book-title">The One And Only Ivan</div>
    <div class="book-author">by Katherine Applegate</div>
    <div class="book-details">
      <h3>About:</h3>
      <p>
        The One and Only Ivan is a heartwarming and moving story inspired by the real-life tale of Ivan,
        a gorilla who lived in captivity for 27 years in a shopping mall. The novel is narrated by Ivan
        himself, offering a unique and deeply emotional perspective.
        <br><br>
        Ivan is a silverback gorilla who lives in the Exit 8 Big Top Mall and Video Arcade. His home is
        a glass-enclosed domain, and he spends his days watching TV, drawing pictures, and observing
        humans. Ivan has friends‚ÄîStella, an elderly elephant, and Bob, a stray dog who sneaks into his
        enclosure. Despite his circumstances, Ivan has grown accustomed to captivity and doesn't often
        think about his life in the wild.
        <br><br>
        Everything changes when Ruby, a baby elephant, arrives at the mall. Ruby's arrival prompts Ivan
        to see their captivity through fresh eyes. Inspired by Stella's wish for Ruby to live a better
        life, Ivan begins to use his artistic talents to draw attention to their plight and find a way
        to save her.
      </p>
    </div>

    <div class="book-actions">
      <a id="readNowBtn"
         href="#"
         data-en="https://online.flipbuilder.com/fdyv/fopf/"
         data-fr="https://online.flipbuilder.com/fdyv/fopf_fr/"
         target="_blank"
         class="btn">Read Now</a>
      <a href="/" class="btn">Go Back</a>
    </div>
  </div>

  <!-- Google Translate Script -->
  <script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>

  <!-- JS Scripts -->
<script>
  function toggleLanguageMenu() {
    const menu = document.getElementById("languageMenu");
    const button = document.getElementById("languageButton");
    menu.classList.toggle("show");
    button.classList.toggle("open");
  }

  function switchLanguage(lang) {
    const select = document.querySelector(".goog-te-combo");
    if (select) {
      select.value = lang;
      select.dispatchEvent(new Event("change"));

      // Wait for translation to apply
      waitForTranslation(lang);
    } else {
      alert("Translator not ready yet. Please wait a moment and try again.");
    }
    document.getElementById("languageMenu").classList.remove("show");
    document.getElementById("languageButton").classList.remove("open");
  }

  function waitForTranslation(lang) {
    const interval = setInterval(() => {
      const cookie = document.cookie;
      if (
        cookie.includes(`googtrans=/en/${lang}`) ||
        cookie.includes(`googtrans=/auto/${lang}`) ||
        (lang === 'en' && cookie.includes(`googtrans=/fr/en`))
      ) {
        setReadNowLinkByLanguage();
        clearInterval(interval);
      }
    }, 300);
    setTimeout(() => clearInterval(interval), 5000); // Stop after 5s max
  }

  function setReadNowLinkByLanguage() {
    const readBtn = document.getElementById("readNowBtn");
    if (!readBtn) return;

    let currentLang = 'en';
    const cookie = document.cookie;
    if (cookie.includes('googtrans=/en/fr') || cookie.includes('googtrans=/auto/fr')) {
      currentLang = 'fr';
    }

    const targetUrl = readBtn.getAttribute(`data-${currentLang}`);
    if (targetUrl) {
      readBtn.setAttribute("href", targetUrl);
    }
  }

  window.addEventListener('load', function () {
    setReadNowLinkByLanguage();
  });

  function googleTranslateElementInit() {
    new google.translate.TranslateElement({
      pageLanguage: 'en',
      includedLanguages: 'en,fr',
      autoDisplay: false
    }, 'google_translate_element');
  }
</script>

</body>

</html>
